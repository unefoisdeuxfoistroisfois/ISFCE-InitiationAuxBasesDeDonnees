-- Creation de la table TPersonne

CREATE TABLE TPersonne(
NUM_PER INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
ALIAS_PER UNIQUE,
ANNEEISFCE_PER DANNEE_ISFCE, --domaine
GAMER_PER BOOLEAN,
JOUR_PER BOOLEAN,
GENRE_PER DGENRE NOT NULL,--domaine
DATE_PER DATE DEFAULT CURRENT_DATE
);

--Creation domaine

CREATE DOMAIN DGENRE CHAR CHECK (VALUE in('H','F','X'));
CREATE DOMAIN DANNEE_ISFCE SMALLINT CHECK (VAlUE BETWEEN 1 AND 3);
CREATE DOMAIN DNOM VARCHAR(30) CHECK (VALUE <>'') COLLATE UNICODE;

CREATE DOMAIN DPOS02 AS SMALLINT CHECK (VALUE>=0);
CREATE DOMAIN DPOS2 AS SMALLINT CHECK (VALUE>0);
CREATE DOMAIN DFREQ AS DECIMAL(4,2) NOT NULL CHECK (VALUE>0);

CREATE DOMAIN DPOS04 INTEGER CHECK (VALUE>=0);
CREATE DOMAIN DSSD_TYPE VARCHAR(10) CHECK (VALUE IN('SATA','SATA M.2','NVME M.2','AUTRES'));

--Creation table TOrdinateur

CREATE TABLE TOrdinateur(
NUM_ORD INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
RAMGB_ORD DPOS2 NOT NULL,
HDDGB_ORD DPOS04 NOT NULL,
SSDGB_ORD DPOS04 NOT NULL,
SSDTYPE_ORD DSSD_TYPE,
TYPECLAVIER_ORD char(2) NOT NULL,
OCCASION_ORD BOOLEAN NOT NULL,
ANNEE_ORD INTEGER,
RESX_ORD DPOS2,
RESY_ORD DPOS2,
TYPEECRAN_ORD VARCHAR(30),
FK_MARQUE_ORD VARCHAR(10) NOT NULL REFERENCES TMARQUE,
FK_PROCESSEUR_ORD VARCHAR(15) NOT NULL REFERENCES TPROCESSEUR,
FKPERSONNE_ORD INTEGER NOT NULL REFERENCES TPERSONNE,
TOTALGB_ORD COMPUTED BY (HDDGB_ORD + SSDGB_ORD),
);
